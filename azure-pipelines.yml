name: $(Date:yyyyMMdd)$(Rev:.r)
resources:
  repositories:
    - repository: evolene
      type: github
      name: KTH/evolene
      endpoint: github.com_jotunskij

jobs:
- job: upgrade_pip
  displayName: Upgrade pip
  continueOnError: true
  workspace:
    clean: outputs
  steps:
  - task: UsePythonVersion@0
    inputs:
      versionSpec: '3.6'
      addToPath: true
      architecture: 'x64'
  - bash: pip install --upgrade pip
  - bash: pip install pipenv --target=$EVOLENE_DIRECTORY
  - checkout: evolene
  - checkout: self
  - bash: $EVOLENE_DIRECTORY/pipenv install
  - bash: $EVOLENE_DIRECTORY/run.sh $(Agent.BuildDirectory)/s/aspen

